<section style="margin-top: 10%;">
  
  <% if (flash) { %>
    <div class="alert alert-<%= flash.type %>">
      <%= flash.message %>
    </div>
  <% } %>
  
  <form name="signupForm" id="signupForm" class="centerform" action="/register" method="POST">
    <div id="signbox"> 
      <div id="contact-us" class="form-group">Register Yourself</div>
      <div class="form-group">
        <label class="lbl">Username</label>
        <input required="true" type="text" class="form-control inputs purple-border" name="name" id="name" placeholder="CrazyCatDad">
        <small id="nameError" class="form-text text-danger" style="display: none;">Username already exists</small>
      </div>
      <div class="form-group">
        <label class="lbl">Email</label>
        <input required="true" type="email" class="form-control inputs purple-border" name="email" id="email" placeholder="name@example.com">
        <small id="emailError" class="form-text text-danger" style="display: none;">Invalid email address</small>
      </div>
      <div class="form-group">
        <label class="lbl">Password</label>
        <input required="true" type="password" class="form-control purple-border" id="password" name="password" placeholder="Enter your password">
        <small id="passwordError" class="form-text text-danger" style="display: none;">Password must be at least 6 characters long</small>
      </div>
      <div class="form-group">
        <label class="lbl">Confirm Password</label>
        <input required="true" type="password" class="form-control purple-border" id="cpassword" name="cpassword" placeholder="Re-Enter your password">
        <small id="cpasswordError" class="form-text text-danger" style="display: none;">Passwords do not match</small>
      </div>
      <div class="wrap">
        <button type="submit" class="button">Sign Up</button>
      </div>
      <div class="wrap text-center">
        <p>Already have an account? <a href="/login" class="text-link">Login</a></p>
      </div>
    </div>
  </form>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      document.getElementById('signupForm').addEventListener('submit', function (e) {
        e.preventDefault();
      
        let name = document.getElementById('name').value.trim();
        let email = document.getElementById('email').value.trim();
        let password = document.getElementById('password').value.trim();
        let cpassword = document.getElementById('cpassword').value.trim();

        document.getElementById('nameError').style.display = 'none';
        document.getElementById('emailError').style.display = 'none';
        document.getElementById('passwordError').style.display = 'none';
        let emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        let formIsValid = true;
        if (!emailPattern.test(email)) {
          document.getElementById('emailError').style.display = 'block';
          formIsValid = false;
        }
       if (password.length < 6) {
          document.getElementById('passwordError').style.display = 'block';
          formIsValid = false;
        }
        if(password !== cpassword)
        {
          document.getElementById('cpasswordError').style.display = 'block';
          formIsValid = false;
        }
        if(formIsValid)
        { document.getElementById('signupForm').submit();}
      });
    });
  </script>
</section>


